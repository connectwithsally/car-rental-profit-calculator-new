<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Car Rental Profit Control Audit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ‚Äî‚Äî STYLE UNCHANGED ‚Äî‚Äî */
body {
  background: #f8fafc;
  color: #1e293b;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  min-height: 100vh;
}
.container {
  max-width: 600px;
  margin: auto;
  padding: 20px;
}
.step { display: none; animation: fadeIn 0.4s ease; }
.step.active { display: block; }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.card {
  background: white;
  border-radius: 12px;
  padding: 24px;
  margin-bottom: 20px;
  border: 1px solid #e2e8f0;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
button {
  width: 100%;
  padding: 16px;
  margin-top: 16px;
  background: #3b82f6;
  border: none;
  color: white;
  font-size: 16px;
  font-weight: 500;
  border-radius: 8px;
  cursor: pointer;
}
input, select {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  font-size: 16px;
}
.progress { display: flex; justify-content: center; gap: 8px; margin: 24px 0; }
.progress-dot { width: 8px; height: 8px; background: #cbd5e1; border-radius: 50%; }
.progress-dot.active { background: #3b82f6; }
.blur { filter: blur(6px); position: relative; }
.blur::after {
  content: "üîí Enter email to reveal";
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 8px 16px;
  border-radius: 8px;
  border: 2px solid #3b82f6;
  color: #3b82f6;
  font-weight: 600;
}
</style>
</head>

<body>
<div class="container">

<!-- INTRO -->
<div class="step active" id="step0">
  <div class="card" style="text-align:center;">
    <h1>Car Rental Profit Control Audit</h1>
    <p>This reveals whether your income is controlled by systems ‚Äî or by luck.</p>
    <button onclick="nextStep()">Start the Audit ‚Üí</button>
  </div>
</div>

<!-- OPERATION -->
<div class="step" id="step1">
  <div class="card">
    <h2>How do you operate?</h2>
    <button onclick="setOperation('platform')">üì± Platform Host</button>
    <button onclick="setOperation('private')">üîë Private Operator</button>
    <button onclick="setOperation('beginner')">üîç Planning to Start</button>
  </div>
</div>

<!-- VEHICLES -->
<div class="step" id="step2">
  <div class="card">
    <h2>Your Setup</h2>
    <label>Cars</label>
    <input type="number" id="cars" value="1" min="1">
    <label>Daily Rate ($)</label>
    <input type="number" id="rate" value="75">
    <label>Booked Days / Month</label>
    <input type="number" id="days" value="15">
  </div>
  <button onclick="nextStep()">Continue ‚Üí</button>
</div>

<!-- LEAKS -->
<div class="step" id="step3">
  <div class="card">
    <h2>Where Control Is Lost</h2>
    <label>Platform / Payment %</label>
    <input type="number" id="fees" value="25">
    <label>Idle Days (Unused Capacity)</label>
    <input type="number" id="idle" value="5">
    <label>Admin Hours / Week</label>
    <input type="number" id="hours" value="12">
  </div>
  <button onclick="calculateResults()">Reveal Analysis ‚Üí</button>
</div>

<!-- RESULTS -->
<div class="step" id="step4">
  <div class="card">
    <h2 style="text-align:center;">Your Control vs Chaos Breakdown</h2>

    <p style="text-align:center;font-weight:600;">
      Monthly Profit: <span id="profitAmount"></span>
    </p>

    <p style="text-align:center;color:#dc2626;">
      Money lost to chaos: <span id="leakAmount"></span>
    </p>

    <div class="blur" id="hourlyCard">
      <h3 style="text-align:center;">Effective Hourly Reality</h3>
      <div style="text-align:center;font-size:28px;" id="hourlyAmount"></div>
    </div>

    <p style="margin-top:20px;font-weight:600;text-align:center;">
      Do you want the exact fixes to reclaim control?
    </p>

    <button onclick="interest(true)">Yes ‚Äî show me how</button>
    <button onclick="interest(false)" style="background:#e5e7eb;color:#1e293b;">
      No ‚Äî I‚Äôll figure it out myself
    </button>

    <div id="emailGate" style="display:none;margin-top:20px;">
      <input type="email" id="email" placeholder="your@email.com">
      <button onclick="saveLead()">Unlock Free 45-Min Session</button>
    </div>
  </div>
</div>

</div>

<script>
const SUPABASE_URL = "https://mfuoltkdoocdpurqytzt.supabase.co";
const SUPABASE_ANON_KEY = "YOUR_KEY";

let userData = {};

function nextStep(){
  document.querySelector('.step.active').classList.remove('active');
  document.querySelectorAll('.step')[++window.step||1].classList.add('active');
}

function setOperation(type){
  userData.operation = type;
  nextStep();
}

function calculateResults(){
  userData.cars = +cars.value;
  userData.rate = +rate.value;
  userData.days = +days.value;
  userData.fees = +fees.value;
  userData.idle = +idle.value;
  userData.hours = +hours.value;

  const gross = userData.cars * userData.rate * userData.days;

  const feeLeak = gross * (userData.fees/100);
  const idleLeak = userData.cars * userData.rate * (userData.idle * 0.4);
  const adminLeak = userData.operation === 'beginner' ? 0 : userData.hours * 4.33 * 30;

  const totalLeaks = feeLeak + idleLeak + adminLeak;
  const profit = Math.max(gross - totalLeaks, 0);
  const hourly = userData.hours ? profit / (userData.hours*4.33) : profit;

  profitAmount.textContent = `$${profit.toFixed(0)}`;
  leakAmount.textContent = `$${totalLeaks.toFixed(0)}`;
  hourlyAmount.textContent = `$${hourly.toFixed(2)}/hour`;

  nextStep();
}

function interest(val){
  if(val){
    document.getElementById('emailGate').style.display='block';
    document.getElementById('hourlyCard').classList.remove('blur');
  }
}

async function saveLead(){
  const email = document.getElementById('email').value;
  if(!email.includes('@')) return alert('Enter valid email');

  await fetch(`${SUPABASE_URL}/rest/v1/leads`,{
    method:'POST',
    headers:{
      apikey:SUPABASE_ANON_KEY,
      Authorization:`Bearer ${SUPABASE_ANON_KEY}`,
      'Content-Type':'application/json'
    },
    body:JSON.stringify({...userData,email})
  });

  alert('Session unlocked. Check your email.');
}
</script>
</body>
</html>



