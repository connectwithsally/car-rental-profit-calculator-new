<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Car Rental Profit Leak Audit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
  background: #f8fafc;
  color: #0f172a;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  margin: 0;
}

.container {
  max-width: 720px;
  margin: auto;
  padding: 24px;
}

.step { display: none; }
.step.active { display: block; }

.card {
  background: #ffffff;
  border-radius: 16px;
  padding: 28px;
  margin-bottom: 24px;
  border: 1px solid #e2e8f0;
}

h1, h2, h3 { margin-top: 0; }

button {
  width: 100%;
  padding: 16px;
  margin-top: 16px;
  background: #2563eb;
  border: none;
  color: white;
  font-size: 16px;
  font-weight: 600;
  border-radius: 10px;
  cursor: pointer;
}

button:hover { background: #1d4ed8; }

input, select {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  border-radius: 8px;
  border: 1px solid #cbd5f5;
  font-size: 16px;
}

input[type=range] {
  padding: 0;
}

.range-value {
  text-align: center;
  font-size: 22px;
  font-weight: 700;
  margin-top: 6px;
  color: #2563eb;
}

.pipe {
  height: 44px;
  background: #e5e7eb;
  border-radius: 22px;
  overflow: hidden;
}

.leak-flow {
  height: 100%;
  background: linear-gradient(
    90deg,
    #16a34a 0%,
    #16a34a var(--profit, 50%),
    #dc2626 var(--profit, 50%),
    #dc2626 100%
  );
}

.blur {
  filter: blur(7px);
  user-select: none;
}

.control-meter {
  height: 16px;
  border-radius: 8px;
  background: linear-gradient(90deg,#dc2626,#f59e0b,#16a34a);
  margin-top: 12px;
}

.control-fill {
  height: 100%;
  background: rgba(255,255,255,0.4);
  width: 0%;
}
</style>
</head>

<body>
<div class="container">

<!-- STEP 0 -->
<div class="step active" id="step0">
  <div class="card">
    <h1>Car Rental Profit Leak Audit</h1>
    <p>Find out where your revenue silently disappears.</p>
    <button onclick="goToStep(1)">Start Free Audit</button>
  </div>
</div>

<!-- STEP 1 -->
<div class="step" id="step1">
  <div class="card">
    <h2>How do you operate?</h2>
    <button onclick="setOperation('platform')">Platform Host</button>
    <button onclick="setOperation('private')">Private / Direct</button>
    <button onclick="setOperation('beginner')">Planning to Start</button>
  </div>
</div>

<!-- STEP 2 -->
<div class="step" id="step2">
  <div class="card">
    <h2>Vehicle Basics</h2>

    <label>Number of cars</label>
    <input type="range" id="cars" min="1" max="50" value="1" oninput="carsVal.innerText=this.value">
    <div class="range-value"><span id="carsVal">1</span> vehicles</div>

    <label>Average daily rate</label>
    <input type="range" id="rate" min="30" max="500" value="90" oninput="rateVal.innerText='$'+this.value">
    <div class="range-value"><span id="rateVal">$90</span></div>

    <label>Booked days / month</label>
    <input type="range" id="days" min="1" max="30" value="15" oninput="daysVal.innerText=this.value">
    <div class="range-value"><span id="daysVal">15</span> days</div>

    <button onclick="goToStep(3)">Continue</button>
  </div>
</div>

<!-- STEP 3 -->
<div class="step" id="step3">
  <div class="card">
    <h2>Hidden Leaks</h2>

    <label>Fees / Friction (%)</label>
    <input type="range" id="fees" min="5" max="40" value="25" oninput="feesVal.innerText=this.value+'%'">
    <div class="range-value"><span id="feesVal">25%</span></div>

    <label>Idle days / month</label>
    <input type="range" id="idle" min="0" max="20" value="5" oninput="idleVal.innerText=this.value">
    <div class="range-value"><span id="idleVal">5</span> days</div>

    <label>Admin hours / week</label>
    <input type="range" id="hours" min="0" max="80" value="12" oninput="hoursVal.innerText=this.value">
    <div class="range-value"><span id="hoursVal">12</span> hrs</div>

    <button onclick="calculate()">See Results</button>
  </div>
</div>

<!-- STEP 4 -->
<div class="step" id="step4">
  <div class="card">
    <h2>Your Profit Breakdown</h2>

    <div class="pipe">
      <div class="leak-flow" id="flow"></div>
    </div>

    <p><strong>Profit:</strong> $<span id="profit"></span></p>
    <p><strong>Leaks:</strong> $<span id="leaks"></span></p>

    <div class="control-meter">
      <div class="control-fill" id="controlFill"></div>
    </div>
    <p>You control <strong><span id="control"></span>%</strong> of outcomes</p>

    <div class="card blur" id="hourlyCard">
      <h3>Effective Hourly</h3>
      <p style="font-size:32px;">$<span id="hourly"></span>/hr</p>
    </div>

    <input type="email" id="email" placeholder="Enter email to unlock">
    <button onclick="unlock()">Unlock Full Report</button>
  </div>
</div>

</div>

<script>
let operation = '';

function goToStep(n) {
  document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
}

function setOperation(op) {
  operation = op;
  goToStep(2);
}

function calculate() {
  const cars = +cars.value;
  const rate = +rate.value;
  const days = +days.value;
  const fees = +fees.value;
  const idle = +idle.value;
  const hours = +hours.value;

  const revenue = cars * rate * days;
  const feeLeak = revenue * (fees/100);
  const idleLeak = cars * rate * idle;
  const adminLeak = hours * 4 * 30;

  const leaks = feeLeak + idleLeak + adminLeak;
  const profit = revenue - leaks;

  const profitPct = Math.max(5, Math.min(95, (profit/revenue)*100));

  flow.style.setProperty('--profit', profitPct + '%');
  profit.innerText = Math.round(profit).toLocaleString();
  leaks.innerText = Math.round(leaks).toLocaleString();

  const control = Math.max(15, Math.min(85,
    60
    - (operation==='platform'?15:0)
    - (hours>30?15:0)
    - (idle>8?10:0)
  ));

  controlFill.style.width = control + '%';
  document.getElementById('control').innerText = control;

  hourly.innerText = (profit / (hours*4.3 || 1)).toFixed(2);

  goToStep(4);
}

function unlock() {
  if (!email.value.includes('@')) {
    alert('Enter a valid email');
    return;
  }
  hourlyCard.classList.remove('blur');
}
</script>

</body>
</html>

